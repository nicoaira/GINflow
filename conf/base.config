/*
 nextflow.config - Default pipeline parameters
*/
params {
    input                          = null
    outdir                         = 'results'
    model_path                     = 'saved_model/ResNet-Secondary.pth'
    structure_column_name          = 'secondary_structure'
    structure_column_num           = null
    header                         = true
    device                         = 'cpu'
    num_workers                    = 4
    subgraphs                      = false
    L                              = null
    keep_paired_neighbors          = false
    retries                        = 0

    embedding_col                  = 'embedding_vector'
    keep_cols                      = 'exon_id'
    num_workers_dist               = 1
    device_dist                    = 'cpu'
    batch_size                     = 1000
    mode                           = 1
    id_column                      = 'exon_id'
    query                          = null
    top_n                          = 10
    embeddings_file                = null
    mask_threshold                 = 0.3

    // aggregation defaults
    alpha1                         = 0.25
    alpha2                         = 0.24
    beta1                          = 0.0057
    beta2                          = 1.15
    gamma                          = 0.41
    percentile                     = 1

    // enable/disable drawing of top‚ÄêN structure pairs
    draw_pairs                     = true


    //plots

    plot_distances_distribution    = true
    hist_seed                      = 42
    hist_frac                      = 0.001
    hist_bins                      = 200

    plot_score_distribution        = true
    score_bins                     = 30
}


profiles {
    conda {
        conda.enabled           = true
        docker.enabled          = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        conda.channels          = ['conda-forge', 'bioconda']
        apptainer.enabled       = false
    }
    mamba {
        conda.enabled           = true
        conda.useMamba          = true
        docker.enabled          = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        apptainer.enabled       = false
    }
    docker {
        docker.enabled          = true
        conda.enabled           = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        apptainer.enabled       = false
        docker.runOptions       = '-u $(id -u):$(id -g)'
    }
    singularity {
        singularity.enabled     = true
        singularity.autoMounts  = true
        conda.enabled           = false
        docker.enabled          = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        apptainer.enabled       = false
    }
}

//report
// define a timestamp and reports directory
/*
trace {
  enabled = true
  file    = "${reportsDir}/trace.tsv"
}

report {
  enabled = true
  file    = "${reportsDir}/report.html"
}

timeline {
  enabled = true
  file    = "${reportsDir}/timeline.html"
}

dag {
  enabled = true
  file    = "${reportsDir}/flowchart.png"
}
*/

manifest {
  name = 'GINflow'
  version = '0.1.0'
  mainScript = 'workflows/main.nf'
}
